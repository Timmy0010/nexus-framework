<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="800" height="600" fill="#f8f9fa" />
    
    <!-- Title -->
    <text x="400" y="30" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Nexus Framework Enhanced Architecture</text>
    
    <!-- Presentation & Access Layer -->
    <rect x="100" y="70" width="600" height="80" rx="10" ry="10" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2" />
    <text x="400" y="90" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Presentation &amp; Access Layer</text>
    <rect x="150" y="100" width="200" height="40" rx="5" ry="5" fill="#ffffff" stroke="#6c8ebf" stroke-width="1" />
    <text x="250" y="125" font-family="Arial" font-size="14" text-anchor="middle">MCP Server (JSON-RPC)</text>
    <rect x="450" y="100" width="200" height="40" rx="5" ry="5" fill="#ffffff" stroke="#6c8ebf" stroke-width="1" />
    <text x="550" y="125" font-family="Arial" font-size="14" text-anchor="middle">HTTP API Endpoints</text>
    
    <!-- Orchestration & Communication Layer -->
    <rect x="100" y="170" width="600" height="120" rx="10" ry="10" fill="#d5e8d4" stroke="#82b366" stroke-width="2" />
    <text x="400" y="190" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Orchestration &amp; Communication Layer</text>
    <rect x="120" y="210" width="170" height="40" rx="5" ry="5" fill="#ffffff" stroke="#82b366" stroke-width="1" />
    <text x="205" y="235" font-family="Arial" font-size="14" text-anchor="middle">Message Broker</text>
    <rect x="310" y="210" width="170" height="40" rx="5" ry="5" fill="#ffffff" stroke="#82b366" stroke-width="1" />
    <text x="395" y="235" font-family="Arial" font-size="14" text-anchor="middle">VerificationAgent</text>
    <rect x="500" y="210" width="180" height="40" rx="5" ry="5" fill="#ffffff" stroke="#82b366" stroke-width="1" />
    <text x="590" y="235" font-family="Arial" font-size="14" text-anchor="middle">GroupChatManager</text>
    <rect x="310" y="260" width="170" height="40" rx="5" ry="5" fill="#ffffff" stroke="#82b366" stroke-width="1" />
    <text x="395" y="285" font-family="Arial" font-size="14" text-anchor="middle">TaskManager</text>
    
    <!-- Core & Intelligence Layer -->
    <rect x="100" y="310" width="600" height="120" rx="10" ry="10" fill="#ffe6cc" stroke="#d79b00" stroke-width="2" />
    <text x="400" y="330" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Core &amp; Intelligence Layer</text>
    <rect x="120" y="350" width="120" height="40" rx="5" ry="5" fill="#ffffff" stroke="#d79b00" stroke-width="1" />
    <text x="180" y="375" font-family="Arial" font-size="14" text-anchor="middle">UserProxyAgent</text>
    <rect x="260" y="350" width="120" height="40" rx="5" ry="5" fill="#ffffff" stroke="#d79b00" stroke-width="1" />
    <text x="320" y="375" font-family="Arial" font-size="14" text-anchor="middle">AssistantAgent</text>
    <rect x="400" y="350" width="120" height="40" rx="5" ry="5" fill="#ffffff" stroke="#d79b00" stroke-width="1" />
    <text x="460" y="375" font-family="Arial" font-size="14" text-anchor="middle">PlannerAgent</text>
    <rect x="540" y="350" width="120" height="40" rx="5" ry="5" fill="#ffffff" stroke="#d79b00" stroke-width="1" />
    <text x="600" y="375" font-family="Arial" font-size="14" text-anchor="middle">ExecutorAgent</text>
    <rect x="310" y="400" width="180" height="40" rx="5" ry="5" fill="#ffffff" stroke="#d79b00" stroke-width="1" />
    <text x="400" y="425" font-family="Arial" font-size="14" text-anchor="middle">ToolAgent</text>
    
    <!-- Tooling & Resources Layer -->
    <rect x="100" y="450" width="600" height="80" rx="10" ry="10" fill="#e1d5e7" stroke="#9673a6" stroke-width="2" />
    <text x="400" y="470" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Tooling &amp; Resources Layer</text>
    <rect x="120" y="480" width="150" height="40" rx="5" ry="5" fill="#ffffff" stroke="#9673a6" stroke-width="1" />
    <text x="195" y="505" font-family="Arial" font-size="14" text-anchor="middle">MCPConnector</text>
    <rect x="290" y="480" width="200" height="40" rx="5" ry="5" fill="#ffffff" stroke="#9673a6" stroke-width="1" />
    <text x="390" y="505" font-family="Arial" font-size="14" text-anchor="middle">CustomMCPConnector</text>
    <rect x="510" y="480" width="170" height="40" rx="5" ry="5" fill="#ffffff" stroke="#9673a6" stroke-width="1" />
    <text x="595" y="505" font-family="Arial" font-size="14" text-anchor="middle">Tool Executors</text>
    
    <!-- Infrastructure Layer -->
    <rect x="50" y="550" width="700" height="40" rx="10" ry="10" fill="#f5f5f5" stroke="#666666" stroke-width="2" />
    <text x="400" y="575" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Infrastructure: Logging, Tracing, Circuit Breaker, Security, Configuration</text>
    
    <!-- Arrows from Presentation to Orchestration -->
    <line x1="250" y1="140" x2="205" y2="210" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="550" y1="140" x2="205" y2="210" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    
    <!-- Arrows within Orchestration -->
    <line x1="205" y1="250" x2="310" y2="230" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="395" y1="250" x2="590" y2="230" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="395" y1="250" x2="395" y2="260" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    
    <!-- Arrows from Orchestration to Core -->
    <line x1="590" y1="250" x2="180" y2="350" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="590" y1="250" x2="320" y2="350" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="590" y1="250" x2="460" y2="350" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="590" y1="250" x2="600" y2="350" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    
    <!-- Arrows from Core back to Orchestration -->
    <line x1="180" y1="350" x2="590" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
    <line x1="320" y1="350" x2="590" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
    <line x1="460" y1="350" x2="590" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
    <line x1="600" y1="350" x2="590" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrowhead)" />
    
    <!-- Arrows from Core to Tools -->
    <line x1="180" y1="390" x2="400" y2="400" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="320" y1="390" x2="400" y2="400" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="460" y1="390" x2="400" y2="400" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="600" y1="390" x2="400" y2="400" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    
    <!-- Arrows from Tools to Tooling -->
    <line x1="400" y1="440" x2="195" y2="480" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="195" y1="520" x2="390" y2="480" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    <line x1="390" y1="520" x2="595" y2="480" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)" />
    
    <!-- Arrows from Infrastructure -->
    <line x1="205" y1="550" x2="205" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrowhead)" />
    <line x1="395" y1="550" x2="395" y2="250" stroke="#000000" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrowhead)" />
    <line x1="595" y1="550" x2="390" y2="520" stroke="#000000" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrowhead)" />
    
    <!-- Arrow definitions -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#000000" />
        </marker>
    </defs>
</svg>
